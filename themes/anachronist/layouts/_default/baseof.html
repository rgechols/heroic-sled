<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  <div class="grid-bg" id="gridBg"></div>
  {{ partial "header.html" . }}
  <main>
    {{ block "main" . }}{{ end }}
  </main>
  {{ partial "footer.html" . }}
  <div id="fastSearch">
    <input id="searchInput" tabindex="0" placeholder="Search...">
    <ul id="searchResults"></ul>
  </div>
  <script src="/js/fastsearch.js"></script>
  <script>
  (function(){
    var btn = document.getElementById('themeToggle');
    btn.addEventListener('click', function(){
      var current = document.documentElement.getAttribute('data-theme');
      var systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      var next;
      if (current === 'dark' || (!current && systemDark)) {
        next = 'light';
      } else {
        next = 'dark';
      }
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      var g = document.getElementById('gridBg');
      g.style.display = 'none';
      g.offsetHeight;
      g.style.display = '';
    });
  })();
  </script>
</body>
</html>
